# =============================================================================
# Conductor Test Orchestration Platform - Environment Configuration
# =============================================================================
# Copy this file to .env and customize as needed
# NEVER commit .env files with real credentials to version control
# =============================================================================

# -----------------------------------------------------------------------------
# General Settings
# -----------------------------------------------------------------------------
CONDUCTOR_ENV=development
VERSION=dev
LOG_LEVEL=debug
LOG_FORMAT=json

# -----------------------------------------------------------------------------
# PostgreSQL Database
# -----------------------------------------------------------------------------
POSTGRES_USER=conductor
POSTGRES_PASSWORD=conductor_secret
POSTGRES_DB=conductor
POSTGRES_PORT=5432

# Connection pool settings
DATABASE_MAX_CONNECTIONS=25
DATABASE_MAX_IDLE_CONNECTIONS=5

# -----------------------------------------------------------------------------
# MinIO Object Storage
# -----------------------------------------------------------------------------
MINIO_ROOT_USER=conductor
MINIO_ROOT_PASSWORD=conductor_secret
MINIO_BUCKET=conductor-artifacts
MINIO_API_PORT=9000
MINIO_CONSOLE_PORT=9001
MINIO_BROWSER_REDIRECT_URL=http://localhost:9001

# -----------------------------------------------------------------------------
# Redis Cache
# -----------------------------------------------------------------------------
REDIS_PORT=6379
REDIS_POOL_SIZE=10

# -----------------------------------------------------------------------------
# Security Credentials
# IMPORTANT: Change these in production!
# -----------------------------------------------------------------------------
# JWT secret for user authentication (minimum 32 characters)
JWT_SECRET=change-this-to-a-secure-random-string-in-production

# JWT token expiration
JWT_EXPIRATION=24h

# Agent authentication token secret
AGENT_TOKEN_SECRET=change-this-agent-secret-in-production

# Default agent token for development
AGENT_TOKEN=dev-agent-token

# -----------------------------------------------------------------------------
# Control Plane Configuration
# -----------------------------------------------------------------------------
CONTROL_PLANE_HTTP_PORT=8080
CONTROL_PLANE_GRPC_PORT=9090
CONTROL_PLANE_METRICS_PORT=8081
CONTROL_PLANE_URL=control-plane:9090

# Scheduler settings
SCHEDULER_POLL_INTERVAL=5s
SCHEDULER_MAX_CONCURRENT_RUNS=100

# Agent management
AGENT_HEARTBEAT_TIMEOUT=90s
AGENT_DRAIN_TIMEOUT=5m

# -----------------------------------------------------------------------------
# Agent Configuration
# -----------------------------------------------------------------------------
AGENT_NAME=local-agent
AGENT_LABELS=env=dev,platform=linux
AGENT_REPLICAS=1
AGENT_MAX_CONCURRENT_TESTS=4
AGENT_DEFAULT_TEST_TIMEOUT=30m
AGENT_HEARTBEAT_INTERVAL=30s

# -----------------------------------------------------------------------------
# Dashboard Configuration
# -----------------------------------------------------------------------------
DASHBOARD_PORT=3000
DASHBOARD_API_URL=http://localhost:8080
DASHBOARD_WS_URL=ws://localhost:8080
VITE_AUTH_DISABLED=true

# -----------------------------------------------------------------------------
# GitHub Integration (Optional)
# -----------------------------------------------------------------------------
# GitHub App ID
GITHUB_APP_ID=

# GitHub App private key path
GITHUB_APP_PRIVATE_KEY_PATH=

# GitHub App installation ID
GITHUB_APP_INSTALLATION_ID=

# GitHub webhook secret
GITHUB_WEBHOOK_SECRET=

# -----------------------------------------------------------------------------
# GitLab Integration (Optional)
# -----------------------------------------------------------------------------
GITLAB_TOKEN=
GITLAB_WEBHOOK_SECRET=

# -----------------------------------------------------------------------------
# Observability (Optional)
# -----------------------------------------------------------------------------
# OpenTelemetry OTLP endpoint
OTEL_EXPORTER_OTLP_ENDPOINT=

# Prometheus metrics path
METRICS_PATH=/metrics

# -----------------------------------------------------------------------------
# Test Environment Ports (used by docker-compose.test.yml)
# -----------------------------------------------------------------------------
POSTGRES_TEST_PORT=5433
MINIO_TEST_API_PORT=9002
MINIO_TEST_CONSOLE_PORT=9003
REDIS_TEST_PORT=6380
CONTROL_PLANE_TEST_HTTP_PORT=8082
CONTROL_PLANE_TEST_GRPC_PORT=9092
CONTROL_PLANE_TEST_METRICS_PORT=8083
DASHBOARD_TEST_PORT=3001
